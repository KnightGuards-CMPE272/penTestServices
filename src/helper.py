import subprocess

def rpcServiceInfo(host):
    command = 'rpcinfo'
    rpcDictEle = {
    }
    count = 0; 
    process = subprocess.Popen(['rpcinfo','-p',host], 
                           stdout=subprocess.PIPE,
                           universal_newlines=True)  
    while True:
      output = process.stdout.readline()
      print(output.strip())
      lineArr = output.split()
      rpcDictArr = []
      finaloutput = output
      return_code = process.poll()
      if return_code is not None:
         print('RETURN CODE', return_code)
         # Process has finished, read rest of the output 
         for output in process.stdout.readlines():
               finaloutput = finaloutput + output.strip() +"\n"
               lineArr = output.split()
               rpcDictEle ={}
               rpcDictEle["program"] = lineArr[0]
               rpcDictEle["version"] = lineArr[1]
               rpcDictEle["proto"] = lineArr[2]
               rpcDictEle["port"] = lineArr[3]
               rpcDictEle["service"] = lineArr[4]
               rpcDictArr.append(rpcDictEle)
            
      return rpcDictArr